<template>
  <div class="box_o">
    <div class="title1">
      <div class="left">
        <img src="@/assets/image/card/o4.png" alt="">
        <span class="span">休闲渔船总量</span>
      </div>
      <div class="right">
          <!-- <span class="num">10</span> -->
          <count-to :startVal="0" :endVal="10" :duration="3000" class="num"></count-to>
          <span class="dw">艘</span>
      </div>
    </div>
    <!-- <div class="title">主导产业产品销售额</div> -->
    <div class="flex progress">
      <div style="flex: 1" class="box box_f">
        <div v-for="(item, index) in state.list" class="flex box_z" style="margin-bottom: 16px;">
          <span class="label">{{ item.title }}</span>

          <div class="progress-bar">
            <div class="el-progress-bar__outer">
              <div
                class="el-progress-bar__inner"
                style=""
                :style="{
                  width: item.bl + 'px',
                  background: `linear-gradient(to right, rgba(219, 255, 248, 0.12), ${item.color}`,
                }"
              ></div>
            </div>
          </div>
          <div class="value">
            <span class="num">{{ item.money }}</span
            ><span>{{ item.dw }}</span>
          </div>
        </div>
      </div>
      <!-- <div class="split"></div>
      <div class="right">
        <div>
          <span class="num">{{ mainCyProductMoney }}</span
          ><span class="unit">艘</span>
        </div>
        <div class="name">渔船总量</div>
      </div> -->
    </div>
  </div>
</template>

<script setup lang="ts">
import { onMounted, ref, reactive } from 'vue';
// import { getCyyXsManagement } from '@/api/industrial';
import { CountTo } from 'vue3-count-to';
let offlineMoney = ref(0);
let onlineMoney = ref(0);
let mainCyProductMoney = ref(8);

const state = reactive({
  list: [
    {
      title: '今日预约游客量',
      money: 200,
      bl: 0,
      color: '#5782FF',
      dw: '个'
    },
    {
      title: '游客总预约量',
      money: 165,
      bl: 50,
      color: '#5782FF',
      dw: '个'
    },
    {
      title: '今日游船使用量',
      money: 5,
      bl: 0,
      color: '#FFB852',
      dw: '次'
    },
    {
      title: '游船总使用量',
      money: 291,
      bl: 70,
      color: '#FFB852',
      dw: '次'
    },
  ] as any,
});

onMounted(() => {
  getData();
});

const getData = () => {
  // getCyyXsManagement({ year: new Date().getFullYear() }).then((res: any) => {
  //   // let data = res.content[0];
  //   // offlineMoney.value = data.offlineMoney;
  //   // onlineMoney.value = data.onlineMoney;
  //   // mainCyProductMoney.value = data.mainCyProductMoney;
  // //   state.list[0].money = data.offlineMoney;
  // //   state.list[0].bl = (data.offlineMoney / data.mainCyProductMoney) * 100;
  // //   state.list[2].money = data.offlineMoney;
  // //   state.list[2].bl = (data.offlineMoney / data.mainCyProductMoney) * 100;
  // //   state.list[1].money = data.onlineMoney;
  // //   state.list[1].bl = (data.onlineMoney / data.mainCyProductMoney) * 100;
  // //   state.list[3].money = data.onlineMoney;
  // //   state.list[3].bl = (data.onlineMoney / data.mainCyProductMoney) * 100;
  // });
};
</script>

<style lang="scss" scoped>
.title {
  font-size: 18px;
  color: #fff;
}

.box {
  width: 100%;
  .progress-bar {
    width: 50%;

    .el-progress-bar__outer {
      height: 10px;
      border-radius: 5px;
      background-color: rgba(219, 255, 248, 0.12);

      .el-progress-bar__inner {
        border-radius: 25px;
        top: 50%;
        transform: translateY(-50%);

        &::after {
          position: absolute;
          border-radius: 25px;
          width: 100%;
          left: -100%;
          background: inherit;
          animation: progress-bar-stripes 3s linear 2s infinite;
        }

        @keyframes progress-bar-stripes {
          0% {
            left: -100%;
          }
          to {
            left: 0;
          }
        }
      }
    }
  }
}
.progress {
  margin-top: 10px;
  height: calc(100% - 72px);
  .label {
    color: #fff;
    font-size: 14px;
    padding-right: 15px;
  }

  .value {
    color: #b5b5b5;
    font-size: 12px;
    padding-left: 15px;

    .num {
      font-size: 20px;
      color: #fff;
      padding-right: 5px;
    }
  }
  .split {
    width: 2px;
    height: 56px;
    background: linear-gradient(
      to bottom,
      transparent 0,
      rgba(0, 255, 159, 0.3) 45%,
      rgba(0, 255, 159, 0.3) 55%,
      transparent 100%
    );
    margin: 0 20px;
  }
  .right {
    .num {
      font-size: 26px;
      color: #00f6ff;
      padding-right: 5px;
    }

    .unit {
      color: #57b7a4;
    }

    .name {
      color: #fff;
      margin-top: 5px;
      font-size: 12px;
    }
  }
}
.title1{
  height: 40px;
  margin-top: 16px;
  // background-color: yellow;
  display: flex;
  margin-bottom: 16px;
  .left{
      font-size: 20px;
      // width: 180px;
      display: flex;
      .span{
          margin-right: 4px;
          color: #e3f0ff;
          font-size: 18px;
          line-height: 1;
          margin-left: -20px;
          padding-top: 15px;
      }
  }
  .right{
      flex: 1;
      .num{
          font-size: 30px;
          padding-right: 5px;
          color: #0bf;
      }
  }
  }
  .box_o{
    width: 100%;
    height: 100%;
    .box_f{
      height: 100%;
      .box_z{
        height: 17%;
      }
    }
  }
</style>
